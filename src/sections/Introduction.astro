---
---
<section
  class="relative w-full h-[98vh] h-[98dvh] overflow-hidden font-body"
  id="home"
>
  <!-- CENTERED IMAGE -->
  <div class="absolute inset-0 z-[1] flex items-center justify-center bg-[#415872]">
    <img
      id="avatar-image"
      src="/assets/avatar.png"
      alt=""
      class="h-[190%] max-w-none translate-y-[16.5%] -translate-x-[5%]"
      style="opacity: 0;"
    />
  </div>

  <!-- LEFT PANEL -->
  <div
    id="left-panel"
    class="absolute top-0 left-0 h-full overflow-hidden transition-[width] duration-700 ease-in-out z-[2]"
    style="width: 50%; opacity: 0;"
  >
  </div>

  <!-- RIGHT PANEL — cold desaturated overlay -->
  <div
    id="right-panel"
    class="absolute top-0 right-0 h-full overflow-hidden transition-[width] duration-700 ease-in-out z-[2]"
    style="width: 50%; opacity: 0; transform: translateX(100%);"
  >
    <div class="absolute inset-0 bg-[#2b3a4a]/80" style="mix-blend-mode: multiply;"></div>
    <div class="absolute inset-0" style="background: rgba(40,50,60,0.4); mix-blend-mode: saturation;"></div>
    <div class="absolute inset-0" style="background: radial-gradient(ellipse at 40% 50%, transparent 35%, #2b3a4a 90%);"></div>
  </div>

  <!-- SPLIT LINE -->
  <div
    id="split-line"
    class="absolute top-0 bottom-0 w-[1px] z-10 transition-all duration-700 ease-in-out"
    style="left: 50%; opacity: 0; background: linear-gradient(to bottom, transparent 0%, #64ffda88 25%, #64ffda 50%, #64ffda88 75%, transparent 100%); box-shadow: 0 0 12px #64ffda55;"
  ></div>

  <!-- GRID OVERLAY -->
  <div
    class="hero-grid absolute inset-0 pointer-events-none z-[8]"
    style="opacity: 0; background-image: linear-gradient(rgba(100,255,218,0.018) 1px, transparent 1px), linear-gradient(90deg, rgba(100,255,218,0.018) 1px, transparent 1px); background-size: 80px 80px;"
  ></div>

  <!-- MAIN COPY (right-aligned, centered on mobile) -->
  <div class="hero-copy absolute top-1/2 right-4 md:right-[6%] -translate-y-1/2 z-20 text-right max-w-[90%] md:max-w-[520px]" style="opacity: 0; transform: translateX(40px) translateY(-50%);">
    <!-- subtitle -->
    <div class="hero-stagger flex items-center justify-end gap-3 mb-5">
      <span class="text-[11px] tracking-[0.28em] text-[#8a9db0] uppercase">Are you ready for an</span>
      <div class="hero-subtitle-dash w-5 h-[1px] bg-[#64ffda33]"></div>
    </div>

    <!-- heading -->
    <h1 class="hero-stagger relative font-bold uppercase leading-[0.88] mb-32 md:mb-24 text-5xl md:text-7xl lg:text-8xl" style="letter-spacing: 0.03em;">
      <span id="ai-text" class="block text-primary-light" style="opacity: 0; transition: opacity 0.4s ease-out;">AI</span>
      <span id="augmented-text" class="block text-[#64ffda]" style="text-shadow: 0 0 40px #64ffda44; letter-spacing: 0; opacity: 0; transition: opacity 0.4s ease-out;">AUGMENTED</span>
      <span id="developer-text" class="block text-primary-light" style="opacity: 0; transition: opacity 0.4s ease-out;">DEVELOPER?</span>
      <img
        width="250"
        height="250"
        alt="signature"
        src="/assets/signature.png"
        class="hero-signature absolute -right-8 md:-right-12 bottom-0 h-16 md:h-32 w-auto translate-y-[50%] object-contain opacity-90 [filter:brightness(0)_invert(1)_sepia(1)_saturate(100)_hue-rotate(165deg)_brightness(0.7)]"
      />
    </h1>

    <!-- role tags -->
    <div class="hero-stagger flex flex-wrap gap-2 justify-end mb-8 md:mb-11">
      <span class="tag tag-lit">Product Engineer</span>
      <span class="tag tag-lit">AI-Augmented</span>
      <span id="available-tag" class="tag tag-scanning flex items-center gap-[7px]" style="min-width: 120px;">
        <span id="available-dot" class="w-[5px] h-[5px] rounded-full inline-block dot-blink"></span>
        <span id="available-text"></span>
      </span>
    </div>

    <!-- CTAs -->
    <div class="hero-stagger flex gap-5 md:gap-7 items-center justify-end">
      <a href="#contact" class="cta-ghost">Get in touch</a>
      <a href="#case-studies" class="cta-primary">
        View Work <span class="text-[13px]">&rarr;</span>
      </a>
    </div>
  </div>

  <!-- TERMINAL BOOT OVERLAY -->
  <div id="boot-overlay" class="absolute inset-0 z-[25] flex items-center justify-center bg-[#415872]">
    <div id="boot-terminal" class="relative font-mono text-white text-xs md:text-sm leading-relaxed max-w-[500px] px-8">
      <span id="boot-cursor" class="inline-block w-[7px] h-[14px] bg-white animate-pulse"></span>
    </div>
  </div>

  <!-- BOTTOM BAR -->
  <div id="bottom-bar-line" class="absolute bottom-0 left-0 right-0 h-[1px] z-20" style="opacity: 0; background: linear-gradient(to right, transparent, #8a9db066, transparent);"></div>
  <div id="bottom-bar" class="absolute bottom-6 left-12 right-12 flex justify-between items-center z-20" style="opacity: 0;">
    <span class="text-[10px] tracking-[0.2em] text-[#6a8a9a] uppercase">
      Curitiba, BR &middot; 2025
    </span>
    <div class="flex flex-col items-center gap-[6px]">
      <span class="text-[9px] tracking-[0.25em] text-[#6a8a9a]">SCROLL</span>
      <div class="w-[1px] h-6" style="background: linear-gradient(to bottom, #8a9db0, transparent);"></div>
    </div>
    <span class="text-[10px] tracking-[0.2em] text-[#6a8a9a] uppercase">
      Product Engineering
    </span>
  </div>
</section>

<style>
  .tag {
    font-size: 10px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    padding: 5px 14px;
    border: 1px solid #2b3a4a;
    color: #8a9db0;
    display: inline-flex;
    align-items: center;
  }

  .tag-lit {
    border-color: #64ffda33;
    color: #64ffda;
    background: #64ffda08;
  }

  .cta-primary {
    display: inline-flex;
    align-items: center;
    gap: 10px;
    padding: 13px 32px;
    border: 1px solid #64ffda55;
    color: #64ffda;
    font-size: 11px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    text-decoration: none;
    background: #64ffda0a;
    transition: all 0.35s;
    cursor: pointer;
  }

  .cta-primary:hover {
    background: #64ffda18;
    border-color: #64ffda99;
    box-shadow: 0 0 32px #64ffda22;
  }

  .cta-ghost {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    color: #8a9db0;
    font-size: 11px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    text-decoration: none;
    transition: color 0.3s;
    cursor: pointer;
  }

  .cta-ghost:hover {
    color: #64ffda66;
  }

  /* Available tag states */
  .tag-scanning {
    border-color: #1e3a4a;
    color: #3a6a7a;
    background: transparent;
  }

  .tag-found {
    border-color: #64ffda66;
    color: #64ffda;
    background: transparent;
    animation: found-flash 0.4s ease-out;
  }

  .tag-available {
    border-color: #64ffda33;
    color: #64ffda;
    background: #64ffda08;
  }

  .dot-blink {
    background: #3a6a7a;
    animation: blink 0.5s step-end infinite;
  }

  .dot-found {
    background: #64ffda;
    animation: none;
  }

  .dot-pulse {
    background: #64ffda;
    animation: pulse-dot 2.2s ease-in-out infinite;
  }

  @keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
  }

  @keyframes found-flash {
    0% { background: #64ffda22; }
    50% { background: #64ffda44; }
    100% { background: transparent; }
  }

  @keyframes pulse-dot {
    0%, 100% { opacity: 1; box-shadow: 0 0 4px #64ffda; }
    50% { opacity: 0.3; box-shadow: none; }
  }

  @keyframes hero-reveal {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* ── Phase transition styles ── */
  #avatar-image { transition: opacity 0.8s ease-out; }
  .hero-copy { transition: opacity 0.7s ease-out, transform 0.7s ease-out; }
  .hero-copy .hero-stagger {
    opacity: 0;
    transform: translateY(12px);
    transition: opacity 0.5s ease-out, transform 0.5s ease-out;
  }
  #right-panel { transition: opacity 0.7s ease-out, transform 0.7s ease-out, width 0.7s ease-in-out; }
  #left-panel { transition: opacity 0.5s ease-out; }
  #split-line { transition: opacity 0.5s ease-out; }
  .hero-grid { transition: opacity 0.5s ease-out; }
  #bottom-bar, #bottom-bar-line { transition: opacity 0.5s ease-out; }

  .glitch-block {
    position: absolute;
    pointer-events: none;
  }

  /* ── Boot overlay CRT scanlines ── */
  #boot-overlay {
    font-family: 'Roboto Mono', 'Courier New', monospace;
  }
  #boot-terminal::before {
    content: '';
    position: absolute;
    inset: 0;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(100, 255, 218, 0.015) 2px,
      rgba(100, 255, 218, 0.015) 4px
    );
    pointer-events: none;
  }

  /* ── Mobile adaptations (≤640px) ── */
  @media (max-width: 640px) {
    /* Staggered entrance animation — mobile only */
    .hero-stagger {
      opacity: 0;
      transform: translateY(12px);
      animation: hero-reveal 0.6s ease-out forwards;
    }
    .hero-stagger:nth-child(1) { animation-delay: 0.15s; }
    .hero-stagger:nth-child(2) { animation-delay: 0.3s; }
    .hero-stagger:nth-child(3) { animation-delay: 0.45s; }
    .hero-stagger:nth-child(4) { animation-delay: 0.6s; }
    .hero-stagger:nth-child(5) { animation-delay: 0.75s; }

    /* CTA active states for touch feedback */
    .cta-primary:active {
      background: #64ffda22;
      border-color: #64ffdacc;
      transform: scale(0.97);
    }
    .cta-ghost:active {
      color: #64ffda;
      transform: scale(0.97);
    }

    /* CTA wrap on mobile */
    .hero-stagger:last-child {
      flex-wrap: wrap;
      gap: 0.75rem;
    }
    /* Center hero copy */
    .hero-copy {
      right: 50% !important;
      transform: translate(50%, -50%) !important;
      text-align: center;
    }
    .hero-copy .flex {
      justify-content: center;
    }

    /* Overlay covers entire section, lighter on mobile */
    #right-panel {
      width: 100% !important;
    }
    #right-panel > div:first-child {
      background: rgba(43, 58, 74, 0.65) !important;
    }
    #split-line {
      display: none;
    }

    /* 3. Finer grid on small screens */
    .hero-grid {
      background-size: 50px 50px !important;
    }

    /* 4. Tighter tags on mobile */
    .tag {
      font-size: 9px;
      padding: 4px 10px;
      letter-spacing: 0.12em;
    }

    /* 5. Hide subtitle dash when centered */
    .hero-subtitle-dash {
      display: none;
    }

    /* Smaller signature, no clipping */
    .hero-copy img[alt="signature"] {
      height: 3.5rem;
      object-fit: contain;
    }

    /* CTA buttons — wrap and scale down */
    .cta-primary {
      padding: 10px 22px;
      font-size: 10px;
    }
    .cta-ghost {
      font-size: 10px;
    }

    /* Bottom bar — tighter padding, smaller text */
    #home > div:last-child {
      left: 1rem !important;
      right: 1rem !important;
    }
    #home > div:last-child > span {
      font-size: 8px;
      letter-spacing: 0.15em;
    }
  }

  /* ── Very small screens (≤480px) ── */
  @media (max-width: 480px) {
    .hero-copy img[alt="signature"] {
      height: 2.5rem;
    }
    .cta-primary {
      padding: 9px 18px;
      font-size: 9px;
      letter-spacing: 0.15em;
    }
    .cta-ghost {
      font-size: 9px;
    }
  }
</style>

<script>
  const hero = document.getElementById('home')!;
  const rightPanel = document.getElementById('right-panel')!;
  const splitLine = document.getElementById('split-line')!;

  hero.addEventListener('mousemove', (e) => {
    const half = window.innerWidth / 2;
    if (e.clientX > half) {
      // Hovering right side — overlay covers entire image
      rightPanel.style.width = '100%';
      splitLine.style.opacity = '0';
    } else {
      // Hovering left side — back to normal
      rightPanel.style.width = '50%';
      splitLine.style.opacity = '1';
    }
  });

  hero.addEventListener('mouseleave', () => {
    rightPanel.style.width = '50%';
    splitLine.style.opacity = '1';
  });

  // ── 0. BOOT SEQUENCE ─────────────────────────────────
  const bootOverlay = document.getElementById('boot-overlay')!;
  const bootTerminal = document.getElementById('boot-terminal')!;
  const bootCursor = document.getElementById('boot-cursor')!;
  const avatarImg = document.getElementById('avatar-image')!;
  const leftPanel = document.getElementById('left-panel')!;
  const bottomBar = document.getElementById('bottom-bar')!;
  const bottomBarLine = document.getElementById('bottom-bar-line')!;
  const heroCopy = document.querySelector('.hero-copy') as HTMLElement;
  const heroGrid = document.querySelector('.hero-grid') as HTMLElement;

  const BOOT_LINES = [
    '> SYSTEM INIT...',
    '> LOADING PROFILE_',
    '> RESOLVING ASSETS [████████░░] 80%',
    '> RESOLVING ASSETS [██████████] 100%',
    '> RENDER COMPLETE_',
  ];

  function typeLineChars(container: HTMLElement, line: string, charDelay: number): Promise<void> {
    return new Promise((resolve) => {
      let i = 0;
      const span = document.createElement('span');
      container.insertBefore(span, bootCursor);
      const interval = setInterval(() => {
        span.textContent += line[i];
        i++;
        if (i >= line.length) {
          clearInterval(interval);
          resolve();
        }
      }, charDelay);
    });
  }

  function delay(ms: number): Promise<void> {
    return new Promise((r) => setTimeout(r, ms));
  }

  // ── Phase 2: Block Glitch ──
  const GLITCH_COLORS = ['#64ffda', '#00d4ff', '#a855f7', '#7c3aed', '#3b82f6', '#c084fc', '#22d3ee', '#ffffff', '#e0f2fe', '#6b7280', '#9ca3af', '#4b5563', '#374151'];

  function createGlitchBlocks(): HTMLElement[] {
    const blocks: HTMLElement[] = [];
    const columnCount = 8 + Math.floor(Math.random() * 5); // 8-12 columns
    for (let i = 0; i < columnCount; i++) {
      // Each column is a full-height container with stacked color segments
      const column = document.createElement('div');
      column.className = 'glitch-block';
      const w = 30 + Math.random() * 120;
      column.style.width = `${w}px`;
      column.style.height = '100%';
      column.style.left = `${Math.random() * 100}%`;
      column.style.top = '0';
      column.style.display = 'flex';
      column.style.flexDirection = 'column';
      column.style.transform = `translateX(${(Math.random() - 0.5) * 60}px)`;
      column.style.opacity = String(0.6 + Math.random() * 0.4);

      // Fill column with 6-14 segments of random heights and colors
      const segCount = 6 + Math.floor(Math.random() * 9);
      for (let s = 0; s < segCount; s++) {
        const seg = document.createElement('div');
        seg.style.flex = String(0.5 + Math.random() * 3); // random height ratio
        seg.style.background = GLITCH_COLORS[Math.floor(Math.random() * GLITCH_COLORS.length)];
        column.appendChild(seg);
      }

      bootOverlay.appendChild(column);
      blocks.push(column);
    }
    return blocks;
  }

  function removeGlitchBlocks(blocks: HTMLElement[]) {
    blocks.forEach((b) => b.remove());
  }

  async function runGlitchEffect() {
    // Hide terminal text during glitch
    bootTerminal.style.display = 'none';

    for (let cycle = 0; cycle < 5; cycle++) {
      const blocks = createGlitchBlocks();
      await delay(70 + Math.random() * 30);
      removeGlitchBlocks(blocks);
      await delay(30 + Math.random() * 20);
    }
  }

  // ── Phase 4: UI Reveal ──
  function revealUI() {
    rightPanel.style.opacity = '1';
    rightPanel.style.transform = 'translateX(0)';
    leftPanel.style.opacity = '1';
    heroCopy.style.opacity = '1';
    heroCopy.style.transform = 'translateX(0) translateY(-50%)';
    splitLine.style.opacity = '1';
    heroGrid.style.opacity = '1';
    bottomBar.style.opacity = '1';
    bottomBarLine.style.opacity = '1';
  }

  // ── Master Sequence ──
  async function runBootSequence() {
    // Phase 1: type terminal lines
    for (let l = 0; l < BOOT_LINES.length; l++) {
      const line = BOOT_LINES[l];
      const charDelay = Math.floor(450 / line.length);
      await typeLineChars(bootTerminal, line, charDelay);
      if (l < BOOT_LINES.length - 1) {
        const br = document.createElement('br');
        bootTerminal.insertBefore(br, bootCursor);
        await delay(200);
      }
    }
    await delay(300);

    // Phase 2: block glitch
    await runGlitchEffect();
    bootOverlay.style.display = 'none';

    // Phase 3: avatar fade-in
    avatarImg.style.opacity = '1';
    await delay(200);

    // Phase 4: UI slide-in (overlaps with avatar fade tail)
    revealUI();
    await delay(700);

    // Phase 5: stagger hero copy children in
    const staggerEls = heroCopy.querySelectorAll<HTMLElement>('.hero-stagger');
    for (let i = 0; i < staggerEls.length; i++) {
      staggerEls[i].style.opacity = '1';
      staggerEls[i].style.transform = 'translateY(0)';
      await delay(150);
    }

    // Phase 6: show AUGMENTED and run decrypt
    augEl.style.opacity = '1';
    await runDecryptAsync();

    // Phase 7: reveal AI and DEVELOPER
    const aiEl = document.getElementById('ai-text')!;
    const devEl = document.getElementById('developer-text')!;
    aiEl.style.opacity = '1';
    devEl.style.opacity = '1';

    // Phase 8: existing hero animations (available tag)
    startHeroAnimations();
  }

  // ── 1. AUGMENTED Decrypt ──────────────────────────────
  const augEl = document.getElementById('augmented-text')!;
  const h1El = augEl.closest('h1')!;
  const TARGET = 'AUGMENTED';
  const CHARS = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%&';

  // Measure the final width and lock it so decrypt chars don't cause reflow
  augEl.style.display = 'inline-block';
  augEl.style.minWidth = `${augEl.offsetWidth}px`;

  let decryptInterval: ReturnType<typeof setInterval> | null = null;

  function runDecrypt(onComplete?: () => void) {
    if (decryptInterval) clearInterval(decryptInterval);
    let iter = 0;
    decryptInterval = setInterval(() => {
      augEl.innerHTML = TARGET.split('').map((ch, i) => {
        const c = i < iter ? ch : CHARS[Math.floor(Math.random() * CHARS.length)];
        return `<span style="display:inline-block;width:1ch;text-align:center;letter-spacing:0">${c}</span>`;
      }).join('');
      iter += 0.35;
      if (iter >= 9) {
        augEl.innerHTML = TARGET.split('').map((ch) =>
          `<span style="display:inline-block;width:1ch;text-align:center;letter-spacing:0">${ch}</span>`
        ).join('');
        clearInterval(decryptInterval!);
        decryptInterval = null;
        onComplete?.();
      }
    }, 38);
  }

  function runDecryptAsync(): Promise<void> {
    return new Promise((resolve) => runDecrypt(resolve));
  }

  // Fire again on h1 mouseenter
  h1El.addEventListener('mouseenter', runDecrypt);

  // ── 2. Available Tag Sequence ─────────────────────────
  const tag = document.getElementById('available-tag')!;
  const dot = document.getElementById('available-dot')!;
  const text = document.getElementById('available-text')!;

  const sequence: [string, number][] = [
    ['SCANNING_.', 800],
    ['SCANNING_..', 1120],
    ['SCANNING_...', 1440],
    ['MATCH FOUND_', 1850],
    ['Available', 2450],
  ];

  function startHeroAnimations() {
    sequence.forEach(([status, seqDelay]) => {
      setTimeout(() => {
        const display = status.replace('_', '');
        text.textContent = display;

        if (status.startsWith('SCANNING')) {
          tag.className = 'tag tag-scanning flex items-center gap-[7px]';
          dot.className = 'w-[5px] h-[5px] rounded-full inline-block dot-blink';
        } else if (status.startsWith('MATCH')) {
          tag.className = 'tag tag-found flex items-center gap-[7px]';
          dot.className = 'w-[5px] h-[5px] rounded-full inline-block dot-found';
        } else {
          tag.className = 'tag tag-available flex items-center gap-[7px]';
          dot.className = 'w-[5px] h-[5px] rounded-full inline-block dot-pulse';
        }
      }, seqDelay);
    });
  }

  // Kick off boot
  runBootSequence();
</script>
