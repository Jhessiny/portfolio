---
import Container from "../components/Container.astro";
import ExperienceItem from "./ExperienceItem.astro";
import { experiences } from "../data/experiences";
---

<div class="py-28 md:py-40 px-4" id="experience">
  <Container>
    <div
      id="experience-grid"
      class="grid grid-cols-1 md:grid-cols-experiencesMd lg:grid-cols-experiencesLg justify-between items-center opacity-0"
    >
      <div>
        <h3 class="text-primary-main font-bold text-5xl leading-none mb-6 md:mb-0 md:text-3xl uppercase md:leading-7">
          <span class="block">My</span>
          <span class="block">Work</span>
          <span class="block">Experience</span>
        </h3>
        <h3 class="text-primary-main font-bold text-3xl uppercase leading-7 opacity-20 hidden md:block">
          <span class="block">Experience</span>
          <span class="block">Work</span>
          <span class="block">My</span>
        </h3>
      </div>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-6">
        {experiences.map((exp) => (
          <ExperienceItem {...exp} />
        ))}
      </div>
    </div>
  </Container>
</div>

<script>
  const grid = document.getElementById("experience-grid")!;
  const observer = new IntersectionObserver(
    (entries) => {
      if (entries[0].isIntersecting) {
        grid.classList.remove("opacity-0");
        grid.classList.add("animate-appearSlideToTop");
        observer.disconnect();
      }
    },
    { rootMargin: "-5%" }
  );
  observer.observe(grid);
</script>
