---
import Layout from "../../layouts/Layout.astro";

const accent = "#ffcb6b";
const accentRgb = "255,203,107";

const metrics = [
  { value: "66%", label: "Cost Reduction", detail: "$0.17 vs $0.50 per run" },
  { value: "<4", label: "Days to Deliver", detail: "Ahead of 5-6 day estimate" },
  { value: "67%", label: "Fewer API Calls", detail: "3-stage filtering pipeline" },
  { value: "85%", label: "Novelty Accuracy", detail: "Manual evaluation on first 5 runs" },
];

const pipeline = [
  {
    stage: "01",
    title: "Batched Superficial Analysis",
    description: "Process all papers against shallow tree levels (0-1). Keyword-based matching with batch processing for efficiency.",
    filter: "Filters out 60-70% of papers",
    cost: "$0.00",
    color: "#64ffda",
  },
  {
    stage: "02",
    title: "Granular Deep-Level Analysis",
    description: "Papers matching deep branches (levels 2-4). One-by-one semantic analysis with higher precision for nuanced topics.",
    filter: "Processes remaining 30-40%",
    cost: "$0.02",
    color: "#00b4d8",
  },
  {
    stage: "03",
    title: "AI Novelty Evaluation",
    description: "Claude AI analyzes truly novel papers. Generates structured concept suggestions with tree placement recommendations.",
    filter: "3-5 actionable suggestions",
    cost: "$0.15",
    color: accent,
  },
];

const timeline = [
  {
    day: "Day 1",
    title: "Foundation",
    items: ["Database schema & migrations", "Keyword generation service", "Materialized view for branch keywords"],
  },
  {
    day: "Day 2",
    title: "External Integration",
    items: ["PubMed API integration", "XML parsing & data normalization", "Rate limiting implementation"],
  },
  {
    day: "Day 3",
    title: "Core Intelligence",
    items: ["3-stage novelty detection", "Claude AI integration", "Suggestion generation with tree placement"],
  },
  {
    day: "Day 4",
    title: "UI & Presentation",
    items: ["React frontend pages", "API endpoints", "End-to-end testing & video demo"],
  },
];

const stack = [
  { name: "Node.js", category: "runtime" },
  { name: "TypeScript", category: "language" },
  { name: "PostgreSQL", category: "database" },
  { name: "Claude API", category: "ai" },
  { name: "React", category: "frontend" },
  { name: "Tailwind CSS", category: "frontend" },
  { name: "PubMed API", category: "integration" },
];

const learnings = [
  {
    title: "Hierarchical Optimization",
    text: "Shallow vs. deep tree levels need different analysis strategies. This insight alone unlocked major cost savings.",
  },
  {
    title: "Pre-computation Wins",
    text: "Storing keywords in materialized views made Stage 1 filtering nearly instant at $0 cost.",
  },
  {
    title: "Progressive Refinement",
    text: "The funnel from 30 papers to 5 suggestions felt natural: broad filter first, precision second.",
  },
  {
    title: "POC Scope Discipline",
    text: "Keeping focus tight — no email, no scheduling, local-only — enabled shipping in under 4 days.",
  },
];
---

<Layout title="COLLAMAP Case Study — JOSM" description="AI-Powered Research Suggestion System case study">
  <div class="cs-page" style={`--accent: ${accent}; --accent-rgb: ${accentRgb};`}>
    <!-- Background layers -->
    <div class="cs-noise"></div>
    <div class="cs-grid"></div>

    <!-- ─── Navigation ─── -->
    <nav class="cs-nav" data-animate>
      <a href="/#case-studies" class="cs-nav__back">
        <span class="cs-nav__arrow">&larr;</span>
        <span class="cs-nav__label">Back to projects</span>
      </a>
      <span class="cs-nav__index">03</span>
    </nav>

    <!-- ─── Hero ─── -->
    <header class="cs-hero">
      <div class="cs-hero__meta" data-animate>
        <div class="cs-hero__tag">
          <span class="cs-hero__dot"></span>
          POC Approved for Production
        </div>
        <span class="cs-hero__date">2024</span>
      </div>

      <h1 class="cs-hero__title" data-animate>
        <span class="cs-hero__title-main">COLLAMAP</span>
        <span class="cs-hero__title-sub">Research Suggestion<br/>Engine</span>
      </h1>

      <p class="cs-hero__summary" data-animate>
        A 3-stage AI pipeline that automatically discovers novel research topics from recent publications
        and generates contextualized, actionable suggestions for platform users — achieving
        <strong>66% cost reduction</strong> over naive approaches.
      </p>

      <div class="cs-hero__tags" data-animate>
        <span class="cs-hero__pill">AI/LLM</span>
        <span class="cs-hero__pill">Full-Stack</span>
        <span class="cs-hero__pill">Cost Optimization</span>
        <span class="cs-hero__pill">Rapid Prototyping</span>
      </div>
    </header>

    <!-- ─── Metrics Strip ─── -->
    <section class="cs-metrics" data-animate>
      <div class="cs-metrics__grid">
        {metrics.map((m) => (
          <div class="cs-metric">
            <span class="cs-metric__value">{m.value}</span>
            <span class="cs-metric__label">{m.label}</span>
            <span class="cs-metric__detail">{m.detail}</span>
          </div>
        ))}
      </div>
    </section>

    <!-- ─── Problem ─── -->
    <section class="cs-section" data-animate>
      <div class="cs-section__label">
        <div class="cs-section__line"></div>
        <span>The Problem</span>
      </div>
      <div class="cs-section__content cs-problem">
        <div class="cs-problem__text">
          <h2 class="cs-section__heading">Platform stagnation<br/><span class="cs-accent">hiding in plain sight</span></h2>
          <p>
            Through analysis of user engagement data using Clarity analytics, a critical pattern emerged:
            the research collaboration platform — designed for researchers to collaborate on disease-specific
            topics — had low active user counts, minimal frequent contributors, and stagnant concept creation.
          </p>
          <p>
            The platform organized research into a <strong>hierarchical concept tree</strong> (5 levels deep,
            max 10 nodes per level). Researchers needed to manually stay current with emerging literature
            and identify novel topics worthy of new concepts — a time-consuming process that became the
            primary barrier to engagement.
          </p>
        </div>
        <div class="cs-problem__signals">
          <div class="cs-signal">
            <span class="cs-signal__icon">&#x25CB;</span>
            <span class="cs-signal__text">Low active user count</span>
          </div>
          <div class="cs-signal">
            <span class="cs-signal__icon">&#x25CB;</span>
            <span class="cs-signal__text">Minimal frequent contributors</span>
          </div>
          <div class="cs-signal">
            <span class="cs-signal__icon">&#x25CB;</span>
            <span class="cs-signal__text">Stagnant concept creation</span>
          </div>
          <div class="cs-signal">
            <span class="cs-signal__icon">&#x25CB;</span>
            <span class="cs-signal__text">Manual literature review burden</span>
          </div>
        </div>
      </div>
    </section>

    <!-- ─── Pipeline Architecture ─── -->
    <section class="cs-section" data-animate>
      <div class="cs-section__label">
        <div class="cs-section__line"></div>
        <span>Architecture</span>
      </div>
      <h2 class="cs-section__heading">The 3-stage<br/><span class="cs-accent">analysis pipeline</span></h2>
      <p class="cs-section__intro">
        The breakthrough was recognizing that not all parts of the concept tree required the same
        depth of analysis. Shallow levels have distinct keyword signatures; deep levels need semantic
        understanding; only truly novel papers need expensive LLM processing.
      </p>

      <div class="cs-pipeline">
        {pipeline.map((p, i) => (
          <div
            class="cs-pipe"
            style={`--pipe-color: ${p.color}; --pipe-delay: ${i * 0.15}s;`}
            data-animate
          >
            <div class="cs-pipe__connector">
              <div class="cs-pipe__dot"></div>
              {i < pipeline.length - 1 && <div class="cs-pipe__line"></div>}
            </div>
            <div class="cs-pipe__card">
              <div class="cs-pipe__bar"></div>
              <div class="cs-pipe__header">
                <span class="cs-pipe__stage">Stage {p.stage}</span>
                <span class="cs-pipe__cost">{p.cost}/run</span>
              </div>
              <h3 class="cs-pipe__title">{p.title}</h3>
              <p class="cs-pipe__desc">{p.description}</p>
              <div class="cs-pipe__filter">
                <span class="cs-pipe__filter-icon">&rarr;</span>
                {p.filter}
              </div>
            </div>
          </div>
        ))}
      </div>

      <!-- funnel visualization -->
      <div class="cs-funnel" data-animate>
        <div class="cs-funnel__row">
          <div class="cs-funnel__bar cs-funnel__bar--full"></div>
          <span class="cs-funnel__label">30-50 papers ingested</span>
        </div>
        <div class="cs-funnel__row">
          <div class="cs-funnel__bar cs-funnel__bar--mid"></div>
          <span class="cs-funnel__label">~12 potentially novel</span>
        </div>
        <div class="cs-funnel__row">
          <div class="cs-funnel__bar cs-funnel__bar--narrow"></div>
          <span class="cs-funnel__label">3-5 actionable suggestions</span>
        </div>
      </div>
    </section>

    <!-- ─── Cost Comparison ─── -->
    <section class="cs-section" data-animate>
      <div class="cs-section__label">
        <div class="cs-section__line"></div>
        <span>Cost Analysis</span>
      </div>
      <h2 class="cs-section__heading">Naive vs. optimized<br/><span class="cs-accent">cost breakdown</span></h2>

      <div class="cs-cost-compare">
        <div class="cs-cost-bar">
          <div class="cs-cost-bar__label">Naive Approach</div>
          <div class="cs-cost-bar__track">
            <div class="cs-cost-bar__fill cs-cost-bar__fill--naive"></div>
          </div>
          <div class="cs-cost-bar__value">$0.50<span>/run</span></div>
        </div>
        <div class="cs-cost-bar">
          <div class="cs-cost-bar__label">3-Stage Pipeline</div>
          <div class="cs-cost-bar__track">
            <div class="cs-cost-bar__fill cs-cost-bar__fill--opt"></div>
          </div>
          <div class="cs-cost-bar__value cs-cost-bar__value--accent">$0.17<span>/run</span></div>
        </div>
      </div>

      <div class="cs-cost-breakdown">
        <div class="cs-cost-item">
          <span class="cs-cost-item__dot" style="background: #64ffda;"></span>
          <span class="cs-cost-item__label">Stage 1 — Keyword</span>
          <span class="cs-cost-item__value">$0.00</span>
        </div>
        <div class="cs-cost-item">
          <span class="cs-cost-item__dot" style="background: #00b4d8;"></span>
          <span class="cs-cost-item__label">Stage 2 — Granular</span>
          <span class="cs-cost-item__value">$0.02</span>
        </div>
        <div class="cs-cost-item">
          <span class="cs-cost-item__dot" style={`background: ${accent};`}></span>
          <span class="cs-cost-item__label">Stage 3 — AI Gen</span>
          <span class="cs-cost-item__value">$0.15</span>
        </div>
      </div>

      <div class="cs-cost-scale">
        <div class="cs-cost-scale__item">
          <span class="cs-cost-scale__num">$0.34</span>
          <span class="cs-cost-scale__label">Monthly / tenant</span>
        </div>
        <div class="cs-cost-scale__divider"></div>
        <div class="cs-cost-scale__item">
          <span class="cs-cost-scale__num">$4.08</span>
          <span class="cs-cost-scale__label">Annual / tenant</span>
        </div>
        <div class="cs-cost-scale__divider"></div>
        <div class="cs-cost-scale__item">
          <span class="cs-cost-scale__num">$408</span>
          <span class="cs-cost-scale__label">Annual @ 100 tenants</span>
        </div>
      </div>
    </section>

    <!-- ─── Timeline ─── -->
    <section class="cs-section" data-animate>
      <div class="cs-section__label">
        <div class="cs-section__line"></div>
        <span>Implementation</span>
      </div>
      <h2 class="cs-section__heading">Four days,<br/><span class="cs-accent">zero shortcuts</span></h2>

      <div class="cs-timeline">
        {timeline.map((t, i) => (
          <div
            class="cs-tl"
            style={`--tl-delay: ${i * 0.1}s;`}
            data-animate
          >
            <div class="cs-tl__marker">
              <span class="cs-tl__day">{t.day}</span>
              <div class="cs-tl__dot"></div>
              {i < timeline.length - 1 && <div class="cs-tl__line"></div>}
            </div>
            <div class="cs-tl__content">
              <h3 class="cs-tl__title">{t.title}</h3>
              <ul class="cs-tl__list">
                {t.items.map((item) => (
                  <li class="cs-tl__item">{item}</li>
                ))}
              </ul>
            </div>
          </div>
        ))}
      </div>
    </section>

    <!-- ─── Tech Stack ─── -->
    <section class="cs-section" data-animate>
      <div class="cs-section__label">
        <div class="cs-section__line"></div>
        <span>Tech Stack</span>
      </div>
      <div class="cs-stack">
        {stack.map((s) => (
          <span class="cs-stack__pill">{s.name}</span>
        ))}
      </div>
    </section>

    <!-- ─── Learnings ─── -->
    <section class="cs-section" data-animate>
      <div class="cs-section__label">
        <div class="cs-section__line"></div>
        <span>Learnings</span>
      </div>
      <h2 class="cs-section__heading">What I<br/><span class="cs-accent">took away</span></h2>

      <div class="cs-learnings">
        {learnings.map((l, i) => (
          <div class="cs-learning" style={`--learn-delay: ${i * 0.08}s;`} data-animate>
            <span class="cs-learning__index">0{i + 1}</span>
            <h3 class="cs-learning__title">{l.title}</h3>
            <p class="cs-learning__text">{l.text}</p>
          </div>
        ))}
      </div>
    </section>

    <!-- ─── Outcome ─── -->
    <section class="cs-section cs-outcome" data-animate>
      <div class="cs-outcome__glow"></div>
      <div class="cs-section__label">
        <div class="cs-section__line"></div>
        <span>Outcome</span>
      </div>
      <h2 class="cs-outcome__heading">
        Approved for<br/><span class="cs-accent">production deployment</span>
      </h2>
      <div class="cs-outcome__points">
        <div class="cs-outcome__point">
          <span class="cs-outcome__check">&#x2713;</span>
          <span>Client impressed by rapid delivery</span>
        </div>
        <div class="cs-outcome__point">
          <span class="cs-outcome__check">&#x2713;</span>
          <span>Validated cost efficiency (66% optimization)</span>
        </div>
        <div class="cs-outcome__point">
          <span class="cs-outcome__check">&#x2713;</span>
          <span>Appreciated depth-aware architectural design</span>
        </div>
        <div class="cs-outcome__point">
          <span class="cs-outcome__check">&#x2713;</span>
          <span>Requested multi-tenant rollout plan</span>
        </div>
      </div>
    </section>

    <!-- ─── Footer nav ─── -->
    <nav class="cs-footer-nav" data-animate>
      <a href="/#case-studies" class="cs-footer-nav__link">
        <span class="cs-footer-nav__arrow">&larr;</span>
        Back to all projects
      </a>
    </nav>
  </div>
</Layout>

<style define:vars={{ accent, accentRgb }}>
  /* ════════════════════════════════════════
     PAGE SHELL
     ════════════════════════════════════════ */
  .cs-page {
    background: #060e1a;
    color: #8a9db0;
    min-height: 100vh;
    position: relative;
    overflow-x: hidden;
  }

  .cs-noise {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 0;
    opacity: 0.025;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
    background-repeat: repeat;
    background-size: 256px 256px;
  }

  .cs-grid {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 0;
    background-image:
      linear-gradient(rgba(var(--accent-rgb), 0.02) 1px, transparent 1px),
      linear-gradient(90deg, rgba(var(--accent-rgb), 0.02) 1px, transparent 1px);
    background-size: 80px 80px;
  }

  /* ════════════════════════════════════════
     SHARED
     ════════════════════════════════════════ */
  .cs-accent { color: var(--accent); }

  .cs-section {
    max-width: 900px;
    margin: 0 auto;
    padding: 0 40px 100px;
    position: relative;
    z-index: 1;
    opacity: 0;
    transform: translateY(28px);
    transition: opacity 0.7s ease, transform 0.7s ease;
  }
  .cs-section.in-view {
    opacity: 1;
    transform: translateY(0);
  }

  .cs-section__label {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 24px;
  }
  .cs-section__line {
    width: 24px;
    height: 1px;
    background: var(--accent);
  }
  .cs-section__label span {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 11px;
    letter-spacing: 0.25em;
    text-transform: uppercase;
    color: var(--accent);
  }

  .cs-section__heading {
    font-family: 'Bebas Neue', sans-serif;
    font-size: clamp(32px, 4.5vw, 54px);
    font-weight: 400;
    letter-spacing: 0.04em;
    line-height: 1.05;
    color: #c8d8e8;
    margin: 0 0 24px;
  }

  .cs-section__intro {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 13px;
    line-height: 1.9;
    color: #7a9aaa;
    max-width: 640px;
    margin: 0 0 48px;
  }

  /* ════════════════════════════════════════
     NAVIGATION
     ════════════════════════════════════════ */
  .cs-nav {
    max-width: 900px;
    margin: 0 auto;
    padding: 40px 40px 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
    z-index: 2;
    opacity: 0;
    transform: translateY(12px);
    transition: opacity 0.5s ease, transform 0.5s ease;
  }
  .cs-nav.in-view {
    opacity: 1;
    transform: translateY(0);
  }

  .cs-nav__back {
    display: flex;
    align-items: center;
    gap: 10px;
    text-decoration: none;
    color: #6a8a9a;
    transition: color 0.25s;
  }
  .cs-nav__back:hover {
    color: var(--accent);
  }
  .cs-nav__arrow {
    font-size: 18px;
    transition: transform 0.25s;
  }
  .cs-nav__back:hover .cs-nav__arrow {
    transform: translateX(-4px);
  }
  .cs-nav__label {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 11px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
  }
  .cs-nav__index {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 11px;
    letter-spacing: 0.2em;
    color: rgba(var(--accent-rgb), 0.35);
  }

  /* ════════════════════════════════════════
     HERO
     ════════════════════════════════════════ */
  .cs-hero {
    max-width: 900px;
    margin: 0 auto;
    padding: 80px 40px 100px;
    position: relative;
    z-index: 1;
  }

  .cs-hero__meta {
    display: flex;
    align-items: center;
    gap: 20px;
    margin-bottom: 32px;
    opacity: 0;
    transform: translateY(16px);
    transition: opacity 0.6s ease 0.1s, transform 0.6s ease 0.1s;
  }
  .cs-hero__meta.in-view {
    opacity: 1;
    transform: translateY(0);
  }

  .cs-hero__tag {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    padding: 5px 14px;
    border: 1px solid rgba(var(--accent-rgb), 0.25);
    color: var(--accent);
    background: rgba(var(--accent-rgb), 0.06);
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .cs-hero__dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--accent);
    animation: cs-pulse 2s ease-in-out infinite;
  }

  @keyframes cs-pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.3; }
  }

  .cs-hero__date {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 11px;
    letter-spacing: 0.2em;
    color: #5a7a8a;
  }

  .cs-hero__title {
    margin: 0 0 32px;
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.7s ease 0.2s, transform 0.7s ease 0.2s;
  }
  .cs-hero__title.in-view {
    opacity: 1;
    transform: translateY(0);
  }

  .cs-hero__title-main {
    display: block;
    font-family: 'Bebas Neue', sans-serif;
    font-size: clamp(52px, 8vw, 96px);
    font-weight: 400;
    letter-spacing: 0.06em;
    line-height: 0.9;
    color: #c8d8e8;
  }

  .cs-hero__title-sub {
    display: block;
    font-family: 'Bebas Neue', sans-serif;
    font-size: clamp(28px, 4vw, 48px);
    font-weight: 400;
    letter-spacing: 0.04em;
    line-height: 1.1;
    color: var(--accent);
    margin-top: 8px;
  }

  .cs-hero__summary {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 14px;
    line-height: 1.9;
    color: #7a9aaa;
    max-width: 600px;
    margin: 0 0 36px;
    font-weight: 300;
    opacity: 0;
    transform: translateY(16px);
    transition: opacity 0.7s ease 0.3s, transform 0.7s ease 0.3s;
  }
  .cs-hero__summary.in-view {
    opacity: 1;
    transform: translateY(0);
  }
  .cs-hero__summary strong {
    color: var(--accent);
    font-weight: 400;
  }

  .cs-hero__tags {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    opacity: 0;
    transform: translateY(16px);
    transition: opacity 0.7s ease 0.4s, transform 0.7s ease 0.4s;
  }
  .cs-hero__tags.in-view {
    opacity: 1;
    transform: translateY(0);
  }

  .cs-hero__pill {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    padding: 5px 12px;
    background: rgba(var(--accent-rgb), 0.06);
    color: rgba(var(--accent-rgb), 0.75);
    border: 1px solid rgba(var(--accent-rgb), 0.12);
  }

  /* ════════════════════════════════════════
     METRICS
     ════════════════════════════════════════ */
  .cs-metrics {
    max-width: 900px;
    margin: 0 auto;
    padding: 0 40px 100px;
    position: relative;
    z-index: 1;
    opacity: 0;
    transform: translateY(24px);
    transition: opacity 0.7s ease, transform 0.7s ease;
  }
  .cs-metrics.in-view {
    opacity: 1;
    transform: translateY(0);
  }

  .cs-metrics__grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    border: 1px solid rgba(var(--accent-rgb), 0.12);
    background: rgba(var(--accent-rgb), 0.02);
  }

  .cs-metric {
    padding: 32px 24px;
    text-align: center;
    border-right: 1px solid rgba(var(--accent-rgb), 0.08);
    position: relative;
  }
  .cs-metric:last-child {
    border-right: none;
  }

  .cs-metric__value {
    display: block;
    font-family: 'Bebas Neue', sans-serif;
    font-size: clamp(36px, 4vw, 52px);
    letter-spacing: 0.04em;
    color: var(--accent);
    line-height: 1;
    margin-bottom: 8px;
  }

  .cs-metric__label {
    display: block;
    font-family: 'IBM Plex Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: #c8d8e8;
    margin-bottom: 6px;
  }

  .cs-metric__detail {
    display: block;
    font-family: 'IBM Plex Mono', monospace;
    font-size: 10px;
    color: #5a7a8a;
    line-height: 1.5;
  }

  /* ════════════════════════════════════════
     PROBLEM
     ════════════════════════════════════════ */
  .cs-problem {
    display: grid;
    grid-template-columns: 1fr 280px;
    gap: 48px;
    align-items: start;
  }

  .cs-problem__text p {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 13px;
    line-height: 1.9;
    color: #7a9aaa;
    margin: 0 0 16px;
    font-weight: 300;
  }
  .cs-problem__text p strong {
    color: #a8c0d0;
    font-weight: 400;
  }

  .cs-problem__signals {
    display: flex;
    flex-direction: column;
    gap: 16px;
    padding: 24px;
    border: 1px solid #1e3a4a;
    background: rgba(var(--accent-rgb), 0.02);
  }

  .cs-signal {
    display: flex;
    align-items: center;
    gap: 12px;
  }
  .cs-signal__icon {
    color: rgba(var(--accent-rgb), 0.4);
    font-size: 10px;
  }
  .cs-signal__text {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 11px;
    color: #8a9db0;
    letter-spacing: 0.04em;
  }

  /* ════════════════════════════════════════
     PIPELINE
     ════════════════════════════════════════ */
  .cs-pipeline {
    display: flex;
    flex-direction: column;
    gap: 0;
    margin-bottom: 64px;
  }

  .cs-pipe {
    display: flex;
    gap: 24px;
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.6s ease var(--pipe-delay), transform 0.6s ease var(--pipe-delay);
  }
  .cs-pipe.in-view {
    opacity: 1;
    transform: translateY(0);
  }

  .cs-pipe__connector {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 20px;
    flex-shrink: 0;
    padding-top: 24px;
  }

  .cs-pipe__dot {
    width: 10px;
    height: 10px;
    border-radius: 50%;
    border: 2px solid var(--pipe-color);
    background: #060e1a;
    flex-shrink: 0;
    position: relative;
    z-index: 1;
  }

  .cs-pipe__line {
    width: 1px;
    flex: 1;
    background: linear-gradient(to bottom, var(--pipe-color), rgba(var(--accent-rgb), 0.1));
  }

  .cs-pipe__card {
    flex: 1;
    padding: 24px;
    border: 1px solid rgba(var(--accent-rgb), 0.08);
    background: #0a1520;
    margin-bottom: 12px;
    position: relative;
    overflow: hidden;
    transition: border-color 0.3s, box-shadow 0.3s;
  }
  .cs-pipe__card:hover {
    border-color: rgba(var(--accent-rgb), 0.18);
    box-shadow: 0 0 30px rgba(var(--accent-rgb), 0.04);
  }

  .cs-pipe__bar {
    position: absolute;
    top: 0;
    left: 0;
    width: 3px;
    height: 100%;
    background: var(--pipe-color);
    opacity: 0.6;
  }

  .cs-pipe__header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
  }

  .cs-pipe__stage {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.2em;
    text-transform: uppercase;
    color: var(--pipe-color);
  }

  .cs-pipe__cost {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.1em;
    color: #5a7a8a;
    padding: 2px 8px;
    background: rgba(var(--accent-rgb), 0.04);
    border: 1px solid rgba(var(--accent-rgb), 0.08);
  }

  .cs-pipe__title {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 24px;
    letter-spacing: 0.04em;
    color: #c8d8e8;
    margin: 0 0 8px;
    font-weight: 400;
  }

  .cs-pipe__desc {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 12px;
    line-height: 1.8;
    color: #6a8a9a;
    margin: 0 0 16px;
    font-weight: 300;
  }

  .cs-pipe__filter {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.1em;
    color: var(--pipe-color);
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .cs-pipe__filter-icon {
    font-size: 12px;
  }

  /* ── Funnel ── */
  .cs-funnel {
    display: flex;
    flex-direction: column;
    gap: 12px;
    padding: 32px;
    border: 1px solid rgba(var(--accent-rgb), 0.08);
    background: rgba(var(--accent-rgb), 0.02);
    opacity: 0;
    transform: translateY(16px);
    transition: opacity 0.7s ease 0.2s, transform 0.7s ease 0.2s;
  }
  .cs-funnel.in-view {
    opacity: 1;
    transform: translateY(0);
  }

  .cs-funnel__row {
    display: flex;
    align-items: center;
    gap: 16px;
  }

  .cs-funnel__bar {
    height: 6px;
    border-radius: 1px;
    transition: width 1.2s cubic-bezier(0.22, 1, 0.36, 1);
  }
  .cs-funnel__bar--full {
    width: 100%;
    background: linear-gradient(90deg, #64ffda, var(--accent));
  }
  .cs-funnel__bar--mid {
    width: 35%;
    background: linear-gradient(90deg, #00b4d8, var(--accent));
  }
  .cs-funnel__bar--narrow {
    width: 12%;
    background: var(--accent);
  }

  .cs-funnel__label {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.1em;
    color: #6a8a9a;
    white-space: nowrap;
  }

  /* ════════════════════════════════════════
     COST COMPARISON
     ════════════════════════════════════════ */
  .cs-cost-compare {
    display: flex;
    flex-direction: column;
    gap: 20px;
    margin-bottom: 32px;
  }

  .cs-cost-bar {
    display: grid;
    grid-template-columns: 140px 1fr auto;
    align-items: center;
    gap: 16px;
  }

  .cs-cost-bar__label {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 11px;
    color: #8a9db0;
    letter-spacing: 0.05em;
  }

  .cs-cost-bar__track {
    height: 8px;
    background: rgba(var(--accent-rgb), 0.06);
    border-radius: 1px;
    overflow: hidden;
  }

  .cs-cost-bar__fill {
    height: 100%;
    border-radius: 1px;
    transition: width 1s cubic-bezier(0.22, 1, 0.36, 1) 0.5s;
  }
  .cs-cost-bar__fill--naive {
    width: 100%;
    background: #5a7a8a;
  }
  .cs-cost-bar__fill--opt {
    width: 34%;
    background: linear-gradient(90deg, var(--accent), rgba(var(--accent-rgb), 0.6));
  }

  .cs-cost-bar__value {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 24px;
    letter-spacing: 0.04em;
    color: #5a7a8a;
    min-width: 80px;
    text-align: right;
  }
  .cs-cost-bar__value--accent {
    color: var(--accent);
  }
  .cs-cost-bar__value span {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 10px;
    color: #5a7a8a;
    letter-spacing: 0.05em;
  }

  .cs-cost-breakdown {
    display: flex;
    gap: 32px;
    margin-bottom: 48px;
    padding-top: 24px;
    border-top: 1px solid rgba(var(--accent-rgb), 0.08);
  }

  .cs-cost-item {
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .cs-cost-item__dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
  }
  .cs-cost-item__label {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 10px;
    color: #6a8a9a;
    letter-spacing: 0.06em;
  }
  .cs-cost-item__value {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 11px;
    color: #a8c0d0;
    letter-spacing: 0.04em;
  }

  .cs-cost-scale {
    display: flex;
    align-items: center;
    gap: 32px;
    padding: 24px;
    border: 1px solid rgba(var(--accent-rgb), 0.08);
    background: rgba(var(--accent-rgb), 0.02);
  }

  .cs-cost-scale__item {
    display: flex;
    flex-direction: column;
    gap: 4px;
  }
  .cs-cost-scale__num {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 28px;
    letter-spacing: 0.04em;
    color: #c8d8e8;
  }
  .cs-cost-scale__label {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 10px;
    color: #5a7a8a;
    letter-spacing: 0.1em;
  }
  .cs-cost-scale__divider {
    width: 1px;
    height: 40px;
    background: rgba(var(--accent-rgb), 0.12);
  }

  /* ════════════════════════════════════════
     TIMELINE
     ════════════════════════════════════════ */
  .cs-timeline {
    display: flex;
    flex-direction: column;
  }

  .cs-tl {
    display: flex;
    gap: 24px;
    opacity: 0;
    transform: translateY(16px);
    transition: opacity 0.6s ease var(--tl-delay), transform 0.6s ease var(--tl-delay);
  }
  .cs-tl.in-view {
    opacity: 1;
    transform: translateY(0);
  }

  .cs-tl__marker {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 60px;
    flex-shrink: 0;
  }

  .cs-tl__day {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.15em;
    text-transform: uppercase;
    color: var(--accent);
    margin-bottom: 12px;
    white-space: nowrap;
  }

  .cs-tl__dot {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    border: 2px solid var(--accent);
    background: #060e1a;
    flex-shrink: 0;
  }

  .cs-tl__line {
    width: 1px;
    flex: 1;
    background: rgba(var(--accent-rgb), 0.15);
    min-height: 40px;
  }

  .cs-tl__content {
    flex: 1;
    padding-bottom: 36px;
  }

  .cs-tl__title {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 22px;
    letter-spacing: 0.04em;
    color: #c8d8e8;
    margin: 0 0 12px;
    font-weight: 400;
  }

  .cs-tl__list {
    list-style: none;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  .cs-tl__item {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 12px;
    color: #6a8a9a;
    line-height: 1.6;
    padding-left: 16px;
    position: relative;
  }
  .cs-tl__item::before {
    content: '—';
    position: absolute;
    left: 0;
    color: rgba(var(--accent-rgb), 0.3);
  }

  /* ════════════════════════════════════════
     TECH STACK
     ════════════════════════════════════════ */
  .cs-stack {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
  }

  .cs-stack__pill {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 11px;
    letter-spacing: 0.08em;
    padding: 8px 16px;
    background: rgba(var(--accent-rgb), 0.04);
    color: rgba(var(--accent-rgb), 0.7);
    border: 1px solid rgba(var(--accent-rgb), 0.1);
    transition: border-color 0.3s, color 0.3s, box-shadow 0.3s;
  }
  .cs-stack__pill:hover {
    border-color: rgba(var(--accent-rgb), 0.3);
    color: var(--accent);
    box-shadow: 0 0 16px rgba(var(--accent-rgb), 0.06);
  }

  /* ════════════════════════════════════════
     LEARNINGS
     ════════════════════════════════════════ */
  .cs-learnings {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 16px;
  }

  .cs-learning {
    padding: 28px;
    border: 1px solid rgba(var(--accent-rgb), 0.08);
    background: #0a1520;
    transition: border-color 0.3s, box-shadow 0.3s;
    opacity: 0;
    transform: translateY(16px);
    transition: opacity 0.6s ease var(--learn-delay),
                transform 0.6s ease var(--learn-delay),
                border-color 0.3s,
                box-shadow 0.3s;
  }
  .cs-learning.in-view {
    opacity: 1;
    transform: translateY(0);
  }
  .cs-learning:hover {
    border-color: rgba(var(--accent-rgb), 0.18);
    box-shadow: 0 0 24px rgba(var(--accent-rgb), 0.04);
  }

  .cs-learning__index {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 10px;
    letter-spacing: 0.2em;
    color: rgba(var(--accent-rgb), 0.35);
    display: block;
    margin-bottom: 12px;
  }

  .cs-learning__title {
    font-family: 'Bebas Neue', sans-serif;
    font-size: 20px;
    letter-spacing: 0.04em;
    color: #c8d8e8;
    margin: 0 0 8px;
    font-weight: 400;
  }

  .cs-learning__text {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 11px;
    line-height: 1.8;
    color: #6a8a9a;
    margin: 0;
    font-weight: 300;
  }

  /* ════════════════════════════════════════
     OUTCOME
     ════════════════════════════════════════ */
  .cs-outcome {
    text-align: center;
    padding-top: 80px !important;
    padding-bottom: 80px !important;
    border-top: 1px solid rgba(var(--accent-rgb), 0.08);
    border-bottom: 1px solid rgba(var(--accent-rgb), 0.08);
  }
  .cs-outcome .cs-section__label {
    justify-content: center;
  }

  .cs-outcome__glow {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 500px;
    height: 300px;
    background: radial-gradient(circle, rgba(var(--accent-rgb), 0.04) 0%, transparent 70%);
    pointer-events: none;
  }

  .cs-outcome__heading {
    font-family: 'Bebas Neue', sans-serif;
    font-size: clamp(36px, 5vw, 58px);
    font-weight: 400;
    letter-spacing: 0.04em;
    line-height: 1.05;
    color: #c8d8e8;
    margin: 0 0 40px;
  }

  .cs-outcome__points {
    display: inline-flex;
    flex-direction: column;
    gap: 16px;
    text-align: left;
  }

  .cs-outcome__point {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .cs-outcome__check {
    font-size: 14px;
    color: var(--accent);
    width: 20px;
    text-align: center;
  }

  .cs-outcome__point span:last-child {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 13px;
    color: #8a9db0;
    letter-spacing: 0.04em;
  }

  /* ════════════════════════════════════════
     FOOTER NAV
     ════════════════════════════════════════ */
  .cs-footer-nav {
    max-width: 900px;
    margin: 0 auto;
    padding: 60px 40px 80px;
    position: relative;
    z-index: 1;
    opacity: 0;
    transform: translateY(16px);
    transition: opacity 0.7s ease, transform 0.7s ease;
  }
  .cs-footer-nav.in-view {
    opacity: 1;
    transform: translateY(0);
  }

  .cs-footer-nav__link {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 12px;
    letter-spacing: 0.12em;
    text-transform: uppercase;
    color: #6a8a9a;
    text-decoration: none;
    display: inline-flex;
    align-items: center;
    gap: 10px;
    transition: color 0.25s;
  }
  .cs-footer-nav__link:hover {
    color: var(--accent);
  }
  .cs-footer-nav__arrow {
    font-size: 16px;
    transition: transform 0.25s;
  }
  .cs-footer-nav__link:hover .cs-footer-nav__arrow {
    transform: translateX(-4px);
  }

  /* ════════════════════════════════════════
     RESPONSIVE
     ════════════════════════════════════════ */
  @media (max-width: 768px) {
    .cs-hero {
      padding: 60px 24px 80px;
    }
    .cs-nav,
    .cs-section,
    .cs-metrics,
    .cs-footer-nav {
      padding-left: 24px;
      padding-right: 24px;
    }
    .cs-metrics__grid {
      grid-template-columns: repeat(2, 1fr);
    }
    .cs-metric:nth-child(2) {
      border-right: none;
    }
    .cs-metric:nth-child(1),
    .cs-metric:nth-child(2) {
      border-bottom: 1px solid rgba(var(--accent-rgb), 0.08);
    }
    .cs-problem {
      grid-template-columns: 1fr;
    }
    .cs-cost-bar {
      grid-template-columns: 1fr;
      gap: 8px;
    }
    .cs-cost-breakdown {
      flex-direction: column;
      gap: 12px;
    }
    .cs-cost-scale {
      flex-direction: column;
      gap: 20px;
      align-items: flex-start;
    }
    .cs-cost-scale__divider {
      width: 40px;
      height: 1px;
    }
    .cs-learnings {
      grid-template-columns: 1fr;
    }
  }

  @media (max-width: 480px) {
    .cs-hero__title-main {
      font-size: 48px;
    }
    .cs-metrics__grid {
      grid-template-columns: 1fr;
    }
    .cs-metric {
      border-right: none;
      border-bottom: 1px solid rgba(var(--accent-rgb), 0.08);
    }
    .cs-metric:last-child {
      border-bottom: none;
    }
    .cs-pipe {
      flex-direction: column;
      gap: 0;
    }
    .cs-pipe__connector {
      flex-direction: row;
      width: auto;
      padding-top: 0;
      padding-bottom: 8px;
      gap: 8px;
    }
    .cs-pipe__line {
      height: 1px;
      width: 40px;
    }
  }
</style>
